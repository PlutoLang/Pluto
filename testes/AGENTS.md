# Repository Guidelines - Generated by https://clara.md/ from faros-ai 

## Scope & Layout
- `testes/` contains Plutoâ€™s end-to-end regression corpus. Top-level `.lua` cases track upstream Lua behaviour, while `.pluto` exercises Pluto-specific features.
- The `_driver.pluto` harness discovers sibling scripts automatically; place new scenarios beside it or within focused subdirectories such as `pluto/` or `bench/`.

## Writing Tests
- Name files after the feature under test (`json_roundtrip.pluto`, `ffi_alignment.lua`) and keep each case self-contained with deterministic seeds.
- For multi-file scenarios, keep fixtures alongside the test and clean up temporary artefacts with `os.remove` in `finally` blocks.
- Use `assert` with descriptive messages and protected calls for negative tests so failures report the intended code path.

## Running Tests
- Execute the full suite with `src/pluto testes/_driver.pluto` after building Pluto.
- Target a specific case by passing its relative path (e.g., `src/pluto testes/_driver.pluto testes/pluto/basic.pluto`).
- Benchmarks in `bench/` are optional; run them manually when performance-sensitive code changes and capture before/after timings.

## Style Guidelines
- Follow Lua idioms: two-space indentation, localized variables, minimal module-level state, and Unix line endings.
- Share small helpers at the top of the file, prefixing internal utilities with `_` when they are not intended for reuse.

## Change Checklist
- Update `_driver.pluto` if you alter discovery rules or introduce new flags.
- Document flaky scenarios in a file header comment and open an issue for follow-up.
- Run the suite on at least one non-macOS platform when addressing platform-specific failures.
- Include failing seeds or logs in the PR body when stabilizing or adding coverage for reported bugs.

## Execution Principles
- Only modify `testes/` when acceptance explicitly calls for new or adjusted coverage; do not mask product bugs via test changes.
- Keep diffs minimal and formatting stable to ensure patches apply cleanly.
- Ensure generated patches are valid unified diffs (`---/+++` with `@@`); resolve tooling warnings like `no diff markers found` before submission.
