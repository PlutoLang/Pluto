local assert = require("assert")

local function check(intended_error, bad_code)
	local _, fail = load(bad_code)
	assert.contains(intended_error, fail)
end

$define invalid_syntax = "invalid syntax"

-- Walrus
do
	check(invalid_syntax, 
	[[
	local tab = {a:=1, (||->do tab=1 end)()}
	]])

	check(invalid_syntax, 
	[[
	error(a:=1)
	]])
end